model sep_abb
//SEP_ABB SEP_ABB_1(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.046,VFSA=5.,VFTM=4.,VFTM2=30.);
//SEP_ABB SEP_ABB_2(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.046,VFSA=5.,VFTM=4.,VFTM2=30.);
//SEP_ABB SEP_ABB_3(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.046,VFSA=5.,VFTM=4.,VFTM2=30.);
//SEP_ABB SEP_ABB_4(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.046,VFSA=5.,VFTM=4.,VFTM2=30.);
//SEP_ABB SEP_ABB_5(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.049000,VFSA=5.,VFTM=4.,VFTM2=30.);
//SEP_ABB SEP_ABB_6(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.049000,VFSA=5.,VFTM=4.,VFTM2=30.);
//SEP_ABB SEP_ABB_7(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.049000,VFSA=5.,VFTM=4.,VFTM2=30.);
//SEP_ABB SEP_ABB_8(DELTAS=88.02000,FDV1=0.0125,FDV2=0.0125,GI=20.,K1=8.440000,KJ=1.87,KQ=0.08,KS=3.540000,LIMP=0.14,MESU=0.02,PLINP=1.600000,T1=1.,T2=2.100000,T3=2.,T4=4.,T5=0.066,T6=0.16,TI=0.03,TJ=11.40000,TMI=0.04,TQ=0.04,TS=1.5,UCMAX=1.150000,UCMIN=0.94,VFNP=1.049000,VFSA=5.,VFTM=4.,VFTM2=30.);
  parameter Real init_1=init_PUISS;
  parameter Real init_3=init_PUISS;
  parameter Real init_12=0.;
  parameter Real init_7=init_VSINIT;
  parameter Real init_9=init_EFD;
  parameter Real init_18=init_IEX;
  parameter Real init_23=init_DIFFI;
  parameter Real init_29=init_DIFDELT;
  parameter Real init_41=0.;
  parameter Real init_45=init_VSINIT;
  parameter Real init_38=init_DIFSGA;
  parameter Real init_32=0;
  parameter Real init_73=3.141593;
  parameter Real init_33=init_DU;
  parameter Real init_8=init_EFD;
  parameter Real init_13=0;
  parameter Real DELTAS;
  parameter Real FDV1;
  parameter Real FDV2;
  parameter Real GI;
  parameter Real K1;
  parameter Real KJ;
  parameter Real KQ;
  parameter Real KS;
  parameter Real LIMP;
  parameter Real MESU;
  parameter Real PLINP;
  parameter Real T1;
  parameter Real T2;
  parameter Real T3;
  parameter Real T4;
  parameter Real T5;
  parameter Real T6;
  parameter Real TI;
  parameter Real TJ;
  parameter Real TMI;
  parameter Real TQ;
  parameter Real TS;
  parameter Real UCMAX;
  parameter Real UCMIN;
  parameter Real VFNP;
  parameter Real VFSA;
  parameter Real VFTM;
  parameter Real VFTM2;
  parameter Real SNREF;
  parameter Real SN;
  parameter Real PN;
  parameter Real PNALT;
  parameter Real init_VCONSI;
  parameter Real init_PUISS;
  parameter Real init_VSINIT;
  parameter Real init_EFD;
  parameter Real init_IEX;
  parameter Real init_DIFFI;
  parameter Real init_DIFDELT;
  parameter Real init_DIFSGA;
  parameter Real init_DU;
  iPSL.NonElectrical.Continuous.SimpleLag SimpleLag_1 (K=1, T=TI, y_start=init_1, initType = Modelica.Blocks.Types.Init.SteadyState); //Eurostag Block number: 1
  Modelica.Blocks.Continuous.Derivative Derivative_3 (k=TS, T=TS, y_start=0, x_start=init_3, initType = Modelica.Blocks.Types.Init.InitialOutput); //Eurostag Block number: 3
  iPSL.NonElectrical.Continuous.SimpleLag SimpleLag_12 (K=KJ*TJ, T=TJ, y_start=init_12, initType = Modelica.Blocks.Types.Init.SteadyState); //Eurostag Block number: 12
  iPSL.NonElectrical.Continuous.SimpleLag SimpleLag_7 (K=1, T=MESU, y_start=init_7, initType = Modelica.Blocks.Types.Init.SteadyState); //Eurostag Block number: 7
  Modelica.Blocks.Math.MultiSum MultiSum_2 (nu =2, k={1, KS}); //Eurostag Block number: 2
  iPSL.NonElectrical.Continuous.LeadLag LeadLag_9 (K=K1, T1=T1, T2=T2, y_start=init_9); //Eurostag Block number: 9
  Modelica.Blocks.Math.MultiSum MultiSum_6 (nu =2, k={-1, 1}); //Eurostag Block number: 6
  Modelica.Blocks.Nonlinear.Limiter Limiter_5 (uMax=LIMP, uMin=-LIMP); //Eurostag Block number: 5
  Modelica.Blocks.Math.MultiSum MultiSum_14 (nu =2, k={1, -1.}); //Eurostag Block number: 14
  iPSL.NonElectrical.Continuous.SimpleLag SimpleLag_18 (K=1., T=TMI, y_start=init_18, initType = Modelica.Blocks.Types.Init.SteadyState); //Eurostag Block number: 18
  Modelica.Blocks.Math.MinMax Min_20 (nu = 2); //Eurostag Block number: 20
  Modelica.Blocks.Math.MinMax Max_21 (nu = 2); //Eurostag Block number: 21
  Modelica.Blocks.Math.MultiSum MultiSum_22 (nu =2, k={1., -1.}); //Eurostag Block number: 22
  iPSL.NonElectrical.Continuous.LeadLag LeadLag_23 (K=GI, T1=T5, T2=T6, y_start=init_23); //Eurostag Block number: 23
  iPSL.NonElectrical.Continuous.LeadLag LeadLag_29 (K=KQ, T1=T3, T2=T4, y_start=init_29); //Eurostag Block number: 29
  Modelica.Blocks.Math.MultiSum MultiSum_31 (nu =2, k={1., -DELTAS}); //Eurostag Block number: 31
  Modelica.Blocks.Math.MultiSum MultiSum_39 (nu =2, k={-1., 180.}); //Eurostag Block number: 39
  iPSL.NonElectrical.Eurostag.Logical.ImAnd ImAnd_40 (nu = 2); //Eurostag Block number: 40
  iPSL.NonElectrical.Continuous.SimpleLag SimpleLag_41 (K=1., T=FDV2, y_start=init_41, initType = Modelica.Blocks.Types.Init.SteadyState); //Eurostag Block number: 41
  iPSL.NonElectrical.Eurostag.Nonlinear.ImPulse ImPulse_42 (S=VFSA, T=VFTM2); //Eurostag Block number: 42
  Modelica.Blocks.Continuous.Derivative Derivative_45 (k=1., T=FDV1, y_start=0, x_start=init_45, initType = Modelica.Blocks.Types.Init.InitialOutput); //Eurostag Block number: 45
  Modelica.Blocks.Math.Abs Abs_46; //Eurostag Block number: 46
  iPSL.NonElectrical.Eurostag.Nonlinear.ImPulse ImPulse_47 (S=0.5, T=VFTM); //Eurostag Block number: 47
  iPSL.NonElectrical.Logical.Relay Relay_48; //Eurostag Block number: 48
  Modelica.Blocks.Sources.Constant Constant_49 (k=PLINP); //Eurostag Block number: 49
  Modelica.Blocks.Sources.Constant Constant_50 (k=VFNP); //Eurostag Block number: 50
  iPSL.NonElectrical.Continuous.SimpleLag SimpleLag_38 (K=1., T=TQ, y_start=init_38, initType = Modelica.Blocks.Types.Init.SteadyState); //Eurostag Block number: 38
  iPSL.NonElectrical.Eurostag.Math.ImMult5 ImMult5_4 (nu =2, a={1., 1.}); //Eurostag Block number: 4
  iPSL.NonElectrical.Eurostag.Math.ImMult5 ImMult5_17 (nu =2, a={1., 1.}); //Eurostag Block number: 17
  iPSL.NonElectrical.Eurostag.Math.ImMult5 ImMult5_24 (nu =2, a={1., 1.}); //Eurostag Block number: 24
  iPSL.NonElectrical.Eurostag.Math.ImMult5 ImMult5_25 (nu =2, a={1., 1.}); //Eurostag Block number: 25
  Modelica.Blocks.Math.MultiSum MultiSum_26 (nu =2, k={1., 1.}); //Eurostag Block number: 26
  Modelica.Blocks.Math.MultiSum MultiSum_27 (nu =2, k={-1., 1.}); //Eurostag Block number: 27
  Modelica.Blocks.Math.Cos Cos_28; //Eurostag Block number: 28
  Modelica.Blocks.Math.Sin Sin_30; //Eurostag Block number: 30
  iPSL.NonElectrical.Eurostag.Math.ImArcTangent ImArcTangent_34 (offset=0.); //Eurostag Block number: 34
  iPSL.NonElectrical.Eurostag.Math.ImMult5 ImMult5_32 (nu =2, a={1., 1.}); //Eurostag Block number: 32
  Modelica.Blocks.Math.MultiSum MultiSum_35 (nu =3, k={1., 1, init_VCONSI}); //Eurostag Block number: 35
  iPSL.NonElectrical.Eurostag.Continuous.ImDiv2 ImDiv2_72 (a1=180., a2=1., a0=0., StartValue=false); //Eurostag Block number: 72
  iPSL.NonElectrical.Eurostag.Math.ImSetPoint ImSetPoint_73 (V=init_73); //Eurostag Block number: 73
  iPSL.NonElectrical.Eurostag.Math.ImSetPoint ImSetPoint_33 (V=init_33); //Eurostag Block number: 33
  iPSL.NonElectrical.Continuous.SimpleLag SimpleLag_8 (K=1, T=0.01, y_start=init_8, initType = Modelica.Blocks.Types.Init.SteadyState); //Eurostag Block number: 8
  Modelica.Blocks.Nonlinear.Limiter Limiter_10 (uMax=UCMAX, uMin=UCMIN); //Eurostag Block number: 10
  Modelica.Blocks.Math.MultiSum MultiSum_11 (nu =2, k={1, -1}); //Eurostag Block number: 11
  iPSL.NonElectrical.Logical.Relay Relay_13; //Eurostag Block number: 13
  Modelica.Blocks.Sources.Constant Constant_16 (k=0.05); //Eurostag Block number: 16
  Modelica.Blocks.Sources.Constant Constant_19 (k=0); //Eurostag Block number: 19
  Modelica.Blocks.Interfaces.RealInput pin_TerminalVoltage;
  Modelica.Blocks.Interfaces.RealInput pin_ActivePowerPNALT;
  Modelica.Blocks.Interfaces.RealInput pin_IEX;
  Modelica.Blocks.Interfaces.RealInput pin_UI;
  Modelica.Blocks.Interfaces.RealInput pin_UR;
  Modelica.Blocks.Interfaces.RealInput pin_TETA;
  Modelica.Blocks.Interfaces.RealInput pin_APR;
  Modelica.Blocks.Interfaces.RealOutput pin_At_UMESURE;
  Modelica.Blocks.Interfaces.RealOutput pin_At_LIR2;
  Modelica.Blocks.Interfaces.RealOutput pin_LAI;
  Modelica.Blocks.Interfaces.RealOutput pin_At_DU;
  Modelica.Blocks.Interfaces.RealOutput pin_SREGUL; //EFD
  Modelica.Blocks.Interfaces.RealOutput pin_LIR;//Start = 0
equation
  connect(ImAnd_40.y, ImMult5_32.u[1]);
  connect(MultiSum_31.y, ImMult5_32.u[2]);
  connect(Cos_28.y, ImMult5_4.u[2]);
  connect(LeadLag_23.y, Min_20.u[1]);
  connect(MultiSum_27.y, ImArcTangent_34.u1);
  connect(Max_21.yMax, MultiSum_11.u[2]);
  connect(Constant_16.y, Relay_13.u3);
  connect(SimpleLag_18.y, MultiSum_22.u[2]);
  connect(MultiSum_22.y, LeadLag_23.u);
  connect(LeadLag_23.y, MultiSum_11.u[1]);
  connect(Constant_19.y, Relay_13.u2);
  connect(MultiSum_11.y, Relay_13.u1);
  connect(ImMult5_4.y, MultiSum_27.u[1]);
  connect(MultiSum_6.y, LeadLag_9.u);
  connect(Derivative_3.y, MultiSum_2.u[2]);
  connect(pin_ActivePowerPNALT, SimpleLag_1.u);
  connect(SimpleLag_1.y, Derivative_3.u);
  connect(Derivative_3.y, SimpleLag_12.u);
  connect(pin_TerminalVoltage, SimpleLag_7.u);
  connect(SimpleLag_7.y, MultiSum_6.u[1]);
  connect(MultiSum_35.y, Limiter_10.u);
  connect(Limiter_10.y, MultiSum_6.u[2]);
  connect(SimpleLag_12.y, MultiSum_2.u[1]);
  connect(MultiSum_2.y, Limiter_5.u);
  connect(Max_21.yMax, Min_20.u[2]);
  connect(LeadLag_9.y, Max_21.u[1]);
  connect(LeadLag_29.y, Max_21.u[2]);
  connect(Min_20.yMin, MultiSum_14.u[1]);
  connect(Limiter_5.y, MultiSum_14.u[2]);
  connect(MultiSum_14.y, SimpleLag_8.u);
  connect(Derivative_45.y, SimpleLag_41.u);
  connect(SimpleLag_41.y, Abs_46.u);
  connect(Abs_46.y, ImPulse_42.u);
  connect(ImPulse_42.y, ImPulse_47.u);
  connect(Constant_50.y, Relay_48.u3);
  connect(Constant_49.y, Relay_48.u2);
  connect(ImPulse_47.y, Relay_48.u1);
  connect(MultiSum_31.y, ImAnd_40.u[1]);
  connect(MultiSum_39.y, ImAnd_40.u[2]);
  connect(ImMult5_17.y, MultiSum_27.u[2]);
  connect(ImMult5_24.y, MultiSum_26.u[1]);
  connect(ImMult5_25.y, MultiSum_26.u[2]);
  connect(Cos_28.y, ImMult5_25.u[2]);
  connect(Sin_30.y, ImMult5_17.u[2]);
  connect(Sin_30.y, ImMult5_24.u[2]);
  connect(MultiSum_26.y, ImArcTangent_34.u2);
  connect(ImDiv2_72.y, SimpleLag_38.u);
  connect(SimpleLag_38.y, MultiSum_39.u[1]);
  connect(SimpleLag_38.y, MultiSum_31.u[1]);
  connect(ImSetPoint_73.y, ImDiv2_72.u2);
  connect(ImArcTangent_34.y, ImDiv2_72.u1);
  connect(pin_IEX, SimpleLag_18.u);
  connect(pin_At_LIR2, MultiSum_22.u[1]);
  connect(pin_LAI, LeadLag_29.u);
  connect(pin_At_UMESURE, Derivative_45.u);
  connect(pin_UI, ImMult5_4.u[1]);
  connect(pin_UR, ImMult5_17.u[1]);
  connect(pin_UI, ImMult5_24.u[1]);
  connect(pin_UR, ImMult5_25.u[1]);
  connect(pin_TETA, Cos_28.u);
  connect(pin_TETA, Sin_30.u);
  connect(pin_At_DU, MultiSum_35.u[1]);
  connect(pin_APR, MultiSum_35.u[2]);
  connect(pin_At_UMESURE, SimpleLag_7.y);
  connect(pin_At_LIR2, Relay_48.y);
  connect(pin_LAI, ImMult5_32.y);
  connect(pin_At_DU, ImSetPoint_33.y);
  connect(pin_SREGUL, SimpleLag_8.y);
  connect(pin_LIR, Relay_13.y);
  MultiSum_31.u[2] =1;
  MultiSum_39.u[2] =1;
  MultiSum_35.u[3] =1;
end sep_abb;